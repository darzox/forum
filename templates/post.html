<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="shortcut icon" href="/static/images/download.png" type="image/x-icon">
  <title>Post: {{.Post.Heading}}</title>
</head>

<body id="body">
  <header>
    <div class="header__wrapper">
      <a class="header__logo logo" href="/">For...<br>umm</a>

      <div class="header__filter">
        <a href="">Latest posts</a>
        <a href="">Most Liked</a>
        <a href="">Category</a>
      </div>
      <div class="header__user">
        {{ if .Auth}}
          <a class="button" href="/create-post">Create post</a>
          <a class="button button__signup" href="/logout">Log out</a>
          <span>{{.User.Username}}</span>
        {{else}}
          <a class="button button__login" href="/signin">Log In</a>
          <a class="button button__signup" href="/signup">Sign Up</a>
        {{end}}
      </div>
    </div>
  </header>
  <main>
    <h1 class="visually-hidden">FORUM</h1>
    <div class="main-wrapper">
      <section class="main-post">
        <article class="post">
          <header class="post__header">
            <address><span>By: </span><a href="">{{.Post.Username}}</a></address><time datetime="2022-10-27"></time>
          </header>
          <section class="post__main">
            <h3>{{.Post.Heading}}</h3>
            <p class="post__text">{{.Post.Text}}</p>
          </section>
          <footer class="post__footer">
            <span class="post__info-likes">Likes: {{ sub .Post.AmountLikes .Post.AmountDisLikes}}</span>
            {{if .Auth}}
            <a class="like-up-post" href="/likeup?postId={{.Post.PostId}}&positive=true&reactTo=post"></a>
            <a class="like-down-post" href="/likedown?postId={{.Post.PostId}}&positive=false&reactTo=post"></a>
            {{end}}
          </footer>
        </article>
      </section>
      <section class="main-comments">
        <ul class="comments__list">
          {{range .Comments}}
          <li class="comment__item">
            <article class="comment">
              <header class="comment__header">
                <address><span>By: </span><a href="">{{.Username}}</a></address><time datetime="2022-10-28"></time>
              </header>
              <section class="comment__main">
                <p class="comment__text">{{.Text}}</p>
              </section>
              <footer class="comment__footer">
                <span class="comment__info-likes">{{sub .AmountLikes .AmountDisLikes}}</span>
                <a class="like-up-post" href="/likeup"></a>
                <a class="like-down-post" href="/likedown"></a>
              </footer>
            </article>
          </li>
          {{end}}
        </ul>
      </section>
      {{if .Auth}}
      <section class="new-comment">
        <form class="form main-create-new-comment" action="/create-comment" method="post">
          <fieldset>
            <label for="comment">Type a comment</label>
            <textarea name="comment" id="comment"></textarea>
          </fieldset>
          <input type="hidden" name="postId" value="{{.Post.PostId}}">
          <input type="hidden" name="userId" value="{{.User.ID}}">
          <button class="button" type="submit">Comment</button>
        </form>
      </section>
      {{end}}
    </div>
  </main>
  <footer class="footer">
    <div class="footer__wrapper">
      {{if .Auth}}
      <a class="footer__logo logo" href="/">For...{{.User.Username}}<br>umm</a>
      {{else}}
      <a class="footer__logo logo" href="/">For...<br>umm</a>
      {{end}}
      <div class="footer__legal">
        <p>&#169;2022. All rights reserved</p>
      </div>
    </div>
  </footer>
</body>

</html>